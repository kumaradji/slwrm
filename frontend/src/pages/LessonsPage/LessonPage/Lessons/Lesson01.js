// Lessons01.js
import React from "react";
import useAdaptiveVideo from "../hooks/useAdaptiveVideo";
import styles from './Lesson.module.scss';
import "video.js/dist/video-js.css";

const Lesson01 = () => {
  // –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–∏–¥–µ–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞–º–∏
  const videoSources = [
    { src: '/videos/lessons/Lesson1-720p.mp4', type: 'video/mp4', label: '720p HD' },
    { src: '/videos/lessons/Lesson1-480p.webm', type: 'video/webm', label: '480p' },
    { src: '/videos/lessons/Lesson1-360p.mp4', type: 'video/mp4', label: '360p' },
    // Fallback –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Ñ–∞–π–ª—É
    { src: '/videos/lessons/Lesson1.mp4', type: 'video/mp4', label: '720p (original)' }
  ];

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞
  const videoOptions = {
    preload: 'metadata',
    playbackRates: [0.75, 1, 1.25, 1.5],
    playerOptions: {
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Video.js
    }
  };

  const { videoRef, deviceInfo, isLoading, error } = useAdaptiveVideo(videoSources, videoOptions);

  return (
    <div className={styles.lesson}>
      <div className={styles.lesson__content}>
        <h2 className={styles.lesson__title}>
          üåø –£—Ä–æ–∫ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∂–µ–ª–µ–∑–Ω–æ–π –≤–æ–¥—ã –¥–ª—è —ç–∫–æ-–ø—Ä–∏–Ω—Ç
        </h2>

        <div className={styles.lesson__text}>
          <p>–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –∫–∞–∫ –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤–æ–π —Å–ª–µ–¥ –ª–∏—Å—Ç –Ω–∞ —Ç–∫–∞–Ω–∏ - —ç—Ç–æ –≤–∑—è—Ç—å –∏ —Å–¥–µ–ª–∞—Ç—å —Å–∞–º–æ–º—É. –ú–Ω–æ–≥–∏—Ö
            –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç—Ä–∞–≤—ã.</p>

          <p>–í —Å—Ç–∞—Ä–æ–¥–∞–≤–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∫–∞–Ω–∏ –∏ —à–µ—Ä—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∫—Ä–∞—à–µ–Ω–∏–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∂–∏–∂—É –∏–∑-–ø–æ–¥ —Ç–æ—á–∏–ª—å–Ω–æ–≥–æ –∫–∞–º–Ω—è,
            –∑–æ–ª—É –∏–∑ –ø–µ—á–∏, —Ä–∞—Å—Å–æ–ª –∏–∑-–ø–æ–¥ –∫–≤–∞—à–µ–Ω–æ–π –∫–∞–ø—É—Å—Ç—ã... —Ä–∞–∑–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏ —Å—Ç–∞—Ä—ã–µ –º–∞—Å—Ç–µ—Ä–∞.</p>

          <p>–°–µ–π—á–∞—Å, –∫–æ–Ω–µ—á–Ω–æ, –≤—Å–µ –ø—Ä–æ—Ç—Ä–∞–≤—ã –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å. –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–∑ –Ω–∏—Ö - –∂–µ–ª–µ–∑–Ω—ã–π –∏ –º–µ–¥–Ω—ã–π –∫—É–ø–æ—Ä–æ—Å –∏
            –∞–ª—é–º–æ–∫–∞–ª–∏–µ–≤—ã–µ –∫–≤–∞—Å—Ü—ã. –ê –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Ö –∫—É–ø–∏—Ç—å?!</p>

          <p>–í–¥—Ä—É–≥ –≤—ã –Ω–∞ –Ω–µ–æ–±–∏—Ç–∞–µ–º–æ–º –æ—Å—Ç—Ä–æ–≤–µ –∏–ª–∏ –≤ —Ç–∞–π–≥–µ –¥—Ä–µ–º—É—á–µ–π;), –∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –Ω–µ –¥–∞—ë—Ç –≤–∞–º –ø–æ–∫–æ—è... –ù–∞ –ø–æ–º–æ—â—å –ø—Ä–∏–¥—ë—Ç
            —Ä–∂–∞–≤–∞—è –∂–µ–ª–µ–∑—è–∫–∞! –ò–∑ –∫—É—Å–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ —Ä–∂–∞–≤–æ–≥–æ –∂–µ–ª–µ–∑–∞, –≤–æ–¥—ã –∏ —É–∫—Å—É—Å–∞ –º–æ–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç–æ—è—Ç—å –∂–µ–ª–µ–∑–Ω—É—é
            –≤–æ–¥—É.</p>

          <p>–ó–∞–ª–µ–π—Ç–µ –≤ –±–∞–Ω–∫—É —ç—Ç–æ—Ç —Ä–∞—Å—Ç–≤–æ—Ä –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –≤ –Ω–µ–≥–æ –∂–µ–ª–µ–∑—è–∫—É. –ß–µ—Ä–µ–∑ 3 –¥–Ω—è –Ω–∞—Å—Ç–æ–π —Å—Ç–∞–Ω–µ—Ç –∂–µ–ª—Ç–µ—Ç—å. –ü—Ä–æ—Ü–µ–¥–∏–≤ —á–µ—Ä–µ–∑
            –≤–µ—Ç–æ—à—å –≤–æ–¥—É, –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–µ–ª–∏–∫–æ–π –º–∞–≥–∏–µ–π —Ö–∏–º–∏–∏ –æ–∫–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –∂–µ–ª–µ–∑–∞.</p>

          <p className={styles.lesson__conclusion}>
            –í–æ–ª—à–µ–±–Ω–∏—á–∞–π—Ç–µ! ‚ú®
          </p>
        </div>

        {/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä */}
        <div className={styles.videoContainer}>
          {error && <div className={styles.videoError}>‚ùå {error}</div>}
          {isLoading && <div className={styles.videoLoading}>üìπ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ...</div>}

          <div
            ref={videoRef}
            className={styles.videoPlayer}
          />
        </div>

        {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞—á–µ—Å—Ç–≤–µ –≤–∏–¥–µ–æ */}
        {deviceInfo.recommendedQuality && (
          <div className={styles.qualityInfo}>
            <div className={styles.qualityInfo__title}>
              üéØ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
            </div>
            <div className={styles.qualityInfo__details}>
              <div><strong>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</strong> {deviceInfo.deviceType}</div>
              <div><strong>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:</strong> {deviceInfo.connectionSpeed}</div>
              <div><strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ:</strong> {deviceInfo.recommendedQuality}</div>
            </div>
            <div className={styles.qualityInfo__note}>
              * –ö–∞—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
            </div>
          </div>
        )}

        {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã */}
        <div className={styles.additionalMaterials}>
          <h3>üìã –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:</h3>
          <ul>
            <li>–ö—É—Å–æ–∫ —Ä–∂–∞–≤–æ–≥–æ –∂–µ–ª–µ–∑–∞</li>
            <li>–í–æ–¥–∞</li>
            <li>–°—Ç–æ–ª–æ–≤—ã–π —É–∫—Å—É—Å</li>
            <li>–°—Ç–µ–∫–ª—è–Ω–Ω–∞—è –±–∞–Ω–∫–∞</li>
            <li>–¢–∫–∞–Ω—å –∏–ª–∏ –º–∞—Ä–ª—è –¥–ª—è –ø—Ä–æ—Ü–µ–∂–∏–≤–∞–Ω–∏—è</li>
          </ul>

          <h3>‚è∞ –í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</h3>
          <p>3-5 –¥–Ω–µ–π –¥–ª—è –Ω–∞—Å—Ç–∞–∏–≤–∞–Ω–∏—è –∂–µ–ª–µ–∑–Ω–æ–π –≤–æ–¥—ã</p>
        </div>
      </div>
    </div>
  );
};

export default Lesson01;